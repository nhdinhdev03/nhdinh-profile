/* Projects Section - Futuristic UI */

#projects {
	/* simpler, lightweight background for better performance */
	--bg: none;
	--glass: rgba(255, 255, 255, 0.06);
	--glass-2: rgba(255, 255, 255, 0.12);
	/* theme-aware stroke derived from current text color */
	--stroke: color-mix(in oklab, var(--text) 12%, transparent);
	--primary: #6366f1; /* indigo-500 */
	--primary-2: #8b5cf6; /* violet-500 */
	--accent: #10b981; /* emerald-500 */
	/* lighter shadow for better perf */
	--shadow: 0 4px 12px rgba(0,0,0,0.15);
	--radius: 16px;
	--radius-sm: 12px;
	--ring: 0 0 0 2px rgba(99,102,241,0.45), 0 0 0 6px rgba(99,102,241,0.15);
		--container-max: 1280px; /* centralized content width cap */

	position: relative;
	padding: clamp(32px, 6vw, 64px) 0;
	color: var(--text);
	isolation: isolate;
}

#projects::before {
	content: "";
	position: absolute;
	inset: 0;
	background: var(--bg); /* none -> no paint */
	z-index: -2;
}

#projects .section-head {
	display: grid;
	grid-template-columns: 1fr auto;
	gap: 24px;
	align-items: end;
	margin-bottom: 28px;
	padding: 16px clamp(12px, 3vw, 20px);
	width: min(92vw, var(--container-max));
	margin-left: auto;
	margin-right: auto;
}

#projects .section-title {
	font-size: clamp(22px, 3vw, 34px);
	font-weight: 800;
	letter-spacing: 0.2px;
	/* Use brand tokens so it works in both light and dark */
	background: linear-gradient(90deg, var(--brand), var(--brand-2));
	-webkit-background-clip: text;
	background-clip: text;
	color: transparent;
}

#projects .section-desc {
	color: var(--muted);
	font-size: clamp(13px, 1.8vw, 15px);
}

/* Filters */
#projects .filters {
	display: flex;
	gap: 10px;
	flex-wrap: wrap;
}

#projects .btn {
	--btn-bg: var(--glass);
	--btn-fg: var(--text);
	border: 1px solid var(--stroke);
	background: color-mix(in oklab, var(--card) 92%, transparent);
	color: var(--text);
	padding: 10px 14px;
	border-radius: 999px;
	font-weight: 600;
	font-size: 14px;
	outline: none;
	/* keep transitions minimal; avoid transform to reduce layout work */
	transition: background-color .12s ease, color .12s ease, border-color .12s ease, box-shadow .12s ease;
	box-shadow: var(--shadow);
}

#projects .btn:hover {
	border-color: rgba(255,255,255,0.25);
}

#projects .btn.active, #projects .btn[aria-pressed="true"] {
	/* subtle active state like Blog */
	background: color-mix(in oklab, var(--brand) 12%, transparent);
	border-color: color-mix(in oklab, var(--brand) 45%, transparent);
	box-shadow: 0 4px 14px -6px color-mix(in oklab, var(--brand) 35%, transparent);
}

#projects .btn.primary {
	/* match Blog primary */
	background: linear-gradient(135deg, var(--brand), var(--brand-2));
	color: #fff;
	border-color: transparent;
}

#projects .btn.ghost {
	background: color-mix(in oklab, var(--card) 92%, transparent);
}

#projects .btn:focus-visible {
	box-shadow: var(--ring);
}

/* Grid */
#projects .grid {
	--gap: clamp(16px, 3vw, 24px);
	--mx: 50%; /* default pointer glow axis */
	display: grid;
	grid-template-columns: repeat(12, 1fr);
	gap: var(--gap);
	padding: 0 clamp(12px, 3vw, 20px) clamp(8px, 2vw, 12px);
	width: min(92vw, var(--container-max));
	margin-left: auto;
	margin-right: auto;
}

@media (max-width: 640px) {
	#projects .section-head {
		grid-template-columns: 1fr;
		gap: 12px;
		align-items: start;
	}
}

/* Card */
#projects .card {
	grid-column: span 4;
	display: flex;
	flex-direction: column;
	gap: 12px;
	/* Adaptive surface using theme card token */
	background: color-mix(in oklab, var(--card) 96%, transparent);
	border: 1px solid var(--stroke);
	border-radius: var(--radius);
	padding: 12px;
	position: relative;
	overflow: hidden;
	/* lighter shadow and add rendering hints for offscreen content */
	box-shadow: 0 2px 8px rgba(0,0,0,0.15);
	transition: border-color .12s ease;
	content-visibility: auto;
	contain: content;
	/* reserve space to avoid layout shifts while content is skipped */
	contain-intrinsic-size: 360px 280px;
}

@keyframes cardIn {
	from { opacity: 0; transform: translateY(10px) scale(.98); }
	to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Removed pointer-follow glow and heavy hover effects */
#projects .card:hover { border-color: rgba(255,255,255,0.22); }

/* Thumb */
#projects .thumb {
	position: relative;
	border-radius: var(--radius-sm);
	overflow: hidden;
	aspect-ratio: 16 / 9;
	/* theme-aware container so images don't look dim in light mode */
	background: color-mix(in oklab, var(--card) 92%, transparent);
	border: 1px solid color-mix(in oklab, var(--text) 10%, transparent);
}

#projects .thumb img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

/* Chips */
#projects .chip {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
}

#projects .chip .tag {
	padding: 6px 10px;
	border-radius: 999px;
	/* flatter, clearer tags */
	background: color-mix(in oklab, var(--brand) 10%, transparent);
	border: 1px solid color-mix(in oklab, var(--brand) 25%, transparent);
	font-size: 12px;
	color: var(--brand-2);
}

/* Titles & text */
#projects .project-title {
	font-size: clamp(16px, 2.2vw, 18px);
	font-weight: 700;
	color: var(--text);
}

#projects .project-desc {
	color: var(--muted);
}

/* Actions */
#projects .actions {
	margin-top: auto;
	display: flex;
	gap: 10px;
}

#projects .actions .btn {
	flex: 1 1 auto;
	text-align: center;
}

/* Responsive columns */
@media (max-width: 1200px) {
	#projects .card { grid-column: span 6; }
}
@media (max-width: 700px) {
	#projects .card { grid-column: span 12; }
}

/* Pointer following glow uses --mx; can be updated from JS if desired */

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
	#projects * { transition: none !important; animation: none !important; }
}
